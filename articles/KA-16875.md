---
title: "Come clonare un'istanza TarMK in AEM"
description: Descrizione
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "From https://helpx.adobe.com/experience-manager/kb/how-to-clone-an-AEM-TarMK-instance-AEM.html"
bug: false
article-created-by: Emily Geary
article-created-date: "3/24/2021 11:36:07 PM"
article-published-by: Emily Geary
article-published-date: "3/24/2021 11:37:50 PM"
version-number: 2
article-number: KA-16875
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=371b76b1-f98c-eb11-a812-000d3a58b9d1"
exl-id: d9c35199-775f-4f24-8d30-3828bb11e7f6
source-git-commit: a59847e2e7e37f432cb01150b9444cd9dbf585df
workflow-type: tm+mt
source-wordcount: '186'
ht-degree: 3%

---

# Come clonare un&#39;istanza TarMK in AEM

## Descrizione

Questo articolo spiega come clonare correttamente un&#39;istanza AEM che utilizza TarMK (o TarMK + FileDataStore) per l&#39;archiviazione.

## Risoluzione

I passaggi seguenti mostrano come copiare un&#39;istanza AEM + TarMK + FileDataStore utilizzando rsync on [!DNL Linux] con AEM installato in `/mnt/aem/author`.

1. Copia l&#39;istanza AEM completa in un altro server mentre è in esecuzione utilizzando un comando come rsync. Assicurati di conservare le marche temporali durante il processo di copia ed escludere la cartella dei registri e il datastore. Esempio:

   ```
   rsync -av --exclude 'crx-quickstart/logs' --exclude 'crx-quickstart/repository/repository/datastore' /mnt/aem/author user@dest-host:/mnt/aem/
   ```

1. Interrompi AEM

1. Avvia un&#39;altra copia della cartella TarMK segmentstore per ottenere eventuali modifiche più recenti dal completamento della prima copia:

   ```
   rsync -av /mnt/aem/author/crx-quickstart/repository/segmentstore/* user@dest-host:/mnt/aem/author/crx-quickstart/repository/segmentstore/
   ```

1. Inizia AEM.

1. Copia il datastore mentre AEM è in esecuzione. Ad esempio: `rsync -av /mnt/aem/author user@dest-host:/mnt/aem/crx-quickstart/repository/repository/datastore /mnt/aem/crx-quickstart/repository/repository/`

1. Nel server di destinazione, ricreare la cartella dei registri, eliminare il `crx-quickstart/repository/index` e elimina il file sling.id.file dalla cartella `crx-quickstart/launchpad/felix` cartella.

   ```
   mkdir /mnt/aem/crx-quickstart/logs
   rm -rf /mnt/aem/crx-quickstart/repository/index
   find /mnt/aem/crx-quickstart/launchpad/felix -type f -name "sling.id.file" -exec rm -f {} \; -print
   ```

1. Sul server di destinazione, avvia AEM e verifica l’istanza.

<b>Nota importante:</b>

È necessario assicurarsi che il datastore venga copiato dopo la cartella segmentstore e che tutte le marche temporali vengano mantenute durante la copia.  Rsync consente di mantenere le marche temporali con l’opzione -a .
