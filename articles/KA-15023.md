---
title: "Implementazione di Video Analytics in Adobe Launch"
description: Descrizione
solution: Customer Journey Analytics,Analytics
product: Customer Journey Analytics,Analytics
applies-to: "Customer Journey Analytics,Analytics"
keywords: "Heartbeat di KCS Launch Video Analytics"
resolution: Resolution
internal-notes: "This implementation discussed in this article does not use Adobe Launch extension for Media Analytics."
bug: false
article-created-by: Krunal Oza
article-created-date: "9/16/2022 9:07:03 AM"
article-published-by: Krunal Oza
article-published-date: "9/16/2022 9:25:26 AM"
version-number: 3
article-number: KA-15023
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=ee0b6fe9-9e35-ed11-9db1-002248086a9c"
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '1055'
ht-degree: 0%

---

# Implementazione di Video Analytics in Adobe Launch

## Descrizione

<br>Ambiente<br><br>


Questo articolo fornisce passaggi per implementare il tracciamento video di YouTube in Adobe Launch utilizzando Media Heartbeat SDK.


<br><br>Problema/Sintomi<br><br>
<b>Prerequisiti</b>


| <ol>   <li>Hai un’implementazione attiva di Adobe Launch.</li>   <li>La suite di rapporti è abilitata per Media Collection.</li>   <li>La suite di rapporti è mappata per correggere la società di accesso di Analytics in Adobe Experience Cloud.</li>   <li>Hai diritti di pubblicazione in Adobe Launch.</li>   <li>Hai familiarità con l’interfaccia utente di Adobe Launch e con il suo funzionamento.</li>  </ol><br> |
| --- |



## Risoluzione


<b>PASSAGGIO 1: Crea nuova regola</b>

Crea una nuova regola nel tuo Adobe di proprietà Launch facendo clic sul pulsante &quot;Aggiungi regola&quot; sotto la scheda &quot;Regole&quot;. Questa regola conterrà la condizione dell’evento per caricare il video YouTube e gli script API per l’analisi video e l’iFrame di YouTube.

- Specificare il nome della regola nella casella di testo Nome.




<b>PASSAGGIO 2: Aggiungi eventi e/o condizioni</b>

Fai clic sul pulsante + in Evento e Condizioni per creare condizioni per avviare il video YouTube. Nel mio esempio, ho aggiunto una condizione &quot;Element Exists&quot; per cercare uno specifico div &quot;player&quot; per avviare il video YouTube.



<b>PASSAGGIO 3: Aggiungi azioni - Variabili di configurazione</b>

Fai clic sul pulsante + sotto le azioni per creare un nuovo elemento di azione. Questo fungerà da singolo punto di configurazione per l’impostazione delle variabili di Video Analytics. Ho usato alcuni valori hardcoded. Tuttavia, puoi utilizzare gli elementi dati per compilare queste variabili.

1. Seleziona &quot;Core&quot; dal menu a discesa Estensione .
2. Seleziona &quot;Codice personalizzato&quot; dal menu a discesa Tipo azione .
3. Aggiungi nome azione nella casella di testo Nome.
4. Selezionare &quot;Javascript&quot; in Lingua.
5. Selezionare &quot;Esegui globalmente&quot;.
6. Fare clic su &quot;Open Editor&quot;.
7. Aggiungi il codice e fai clic su salva. Assicurati di aggiornare i valori in base alla tua azienda e alla suite di rapporti.



```
(function() {    'use strict';
    // Export symbols.
    window.Configuration = {
        PLAYER: {
            NAME: 'sample player name'
            //VIDEO_ID: 'sample video id',
           //VIDEO_NAME: sample video name'
        },
        VISITOR: {
            MARKETING_CLOUD_ORG_ID: 'experience cloud ID',
            TRACKING_SERVER: 'tracking server',
            DPID: '',
            DPUUID: ''
        },
        APP_MEASUREMENT: {
            RSID: 'report suite id',
            TRACKING_SERVER: 'tracking server',
            PAGE_NAME: 'page name',
            CHAR_SET: 'UTF-8'
        },
        HEARTBEAT: {
            TRACKING_SERVER: 'heartbeat tracking server',
            PUBLISHER: 'publisher id',
            CHANNEL: 'channel',
            OVP: 'ovp name',
            SDK: 'sgk version',
       SSL: 'false',
       DEBUG: 'true'
        }
    };
})();
```


(function() { &#39;use narrow&#39;;     // Esporta simboli.
    window.Configuration = { PLAYER: { NOME: &#39;nome sample player&#39; //VIDEO_ID: &#39;ID video campione&#39;, //VIDEO_NAME: esempio di nome video&#39; }, VISITOR: { MARKETING_CLOUD_ORG_ID: &#39;experience cloud ID&#39;, TRACKING_SERVER: &#39;tracking server&#39;, DPID: &#39;&#39;, DPUUID: &#39;&#39; }, APP_MEASUREMENT: { RSID: &#39;report suite id&#39;, TRACKING_SERVER: &#39;server di tracciamento&#39;, PAGE_NAME: &#39;page name&#39;, CHAR_SET: &#39;UTF-8&#39; }, HEARTBEAT: { TRACKING_SERVER: &#39;heartbeat tracking server&#39;, PUBLISHER: &#39;publisher id&#39;, CHANNEL: &quot;channel&quot;, OVP: &#39;ovp name&#39;, SDK: &#39;versione sgk&#39;, SSL: &#39;false&#39;, DEBUG: &#39;true&#39; } }; })();



<b>PASSAGGIO 4: Aggiungi azioni Servizio ID visitatori</b>

Media Analytics richiede un&#39;istanza del servizio ID visitatori. Dovrai scaricare il codice del servizio ID visitatore da Code Manager nell’interfaccia utente di Adobe Analytics.

Una volta scaricato il codice del servizio ID visitatore, fai clic sul pulsante + sotto le azioni per creare un nuovo elemento di azione, quindi

1. Seleziona &quot;Core&quot; dal menu a discesa Estensione .
2. Seleziona &quot;Codice personalizzato&quot; dal menu a discesa Tipo azione .
3. Aggiungi nome azione nella casella di testo Nome.
4. Selezionare &quot;Javascript&quot; in Lingua.
5. Selezionare &quot;Esegui globalmente&quot;.
6. Fare clic su &quot;Open Editor&quot;.
7. In basso, aggiungi il seguente codice e fai clic su salva.
8. In basso, aggiungi il seguente codice e fai clic su salva.


var visitor = Visitor.getInstance(&quot;Experience Cloud ID&quot;, { trackingServer: &quot;tracking server&quot;, // uguale a s.trackingServer trackingServerSecure: &quot; server di tracciamento &quot; // uguale a s.trackingServerSecure });

<b>PASSAGGIO 5: Aggiungi azioni - Codice Appmeasurement</b>

Media Analytics richiede un&#39;istanza di Appmeasurement. Dovrai scaricarlo da Code Manager nell’interfaccia utente di Adobe Analytics.

Una volta scaricato il codice Appmeasurement, fai clic sul pulsante + sotto le azioni per creare un nuovo elemento di azione, quindi

1. Seleziona &quot;Core&quot; dal menu a discesa Estensione .
2. Seleziona &quot;Codice personalizzato&quot; dal menu a discesa Tipo azione .
3. Aggiungi nome azione nella casella di testo Nome.
4. Selezionare &quot;Javascript&quot; in Lingua.
5. Selezionare &quot;Esegui globalmente&quot;.
6. Fare clic su &quot;Open Editor&quot;.
7. Aggiungi il codice del servizio ID visitatore.
8. Nella parte superiore, aggiungi il seguente codice e fai clic su salva.

<br><br><br>// Inizializza AppMeasurement
<br>var s_account=&quot;id suite di rapporti&quot;
<br>var s=s_gi(s_account)
<br>/\*\*\*\*\*\*\*\*\* CONFIGURAZIONE DEL SERVIZIO ID VISITATORE - RICHIEDE VisitorAPI.js \*\*\*\*\*\*\*\*\*/
<br>s.visitor=Visitor.getInstance(&quot;ID Experience Cloud&quot;)<br><br><br>
<b>PASSAGGIO 6: Aggiungi azioni - Codice Heartbeat</b>

Scarica l&#39;SDK di Heartbeat da [https://github.com/Adobe-Marketing-Cloud/media-sdks/tree/master/sdks/js/libs](https://github.com/Adobe-Marketing-Cloud/media-sdks/tree/master/sdks/js/libs).

Una volta scaricato il codice Heartbeat, fai clic sul pulsante + sotto le azioni per creare un nuovo elemento azione, quindi

1. Seleziona &quot;Core&quot; dal menu a discesa Estensione .
2. Seleziona &quot;Codice personalizzato&quot; dal menu a discesa Tipo azione .
3. Aggiungi nome azione nella casella di testo Nome.
4. Selezionare &quot;Javascript&quot; in Lingua.
5. Selezionare &quot;Esegui globalmente&quot;.
6. Fare clic su &quot;Open Editor&quot;.
7. Aggiungi il codice del servizio ID visitatore.
8. In basso, aggiungi il seguente codice e fai clic su salva.


//Crea un riferimento locale alle classi MediaHeartbeat

var MediaHeartbeat = ADB.va.MediaHeartbeat; var MediaHeartbeatConfig = ADB.va.MediaHeartbeatConfig; var MediaHeartbeatDelegate = ADB.va.MediaHeartbeatDelegate;

//Inizializzazione Media Heartbeat

var mediaConfig = new MediaHeartbeatConfig(); mediaConfig.trackingServer = Configuration.HEARTBEAT.TRACKING_SERVER; mediaConfig.playerName = Configuration.PLAYER.NAME; mediaConfig.channel = Configuration.HEARTBEAT.CHANNEL; mediaConfig.debugLogging = Configuration.HEARTBEAT.DEBUG;

mediaConfig.appVersion = Configuration.HEARTBEAT.SDK; mediaConfig.ssl = Configuration.HEARTBEAT.SDK; mediaConfig.ovp = Configuration.HEARTBEAT.OVP;

// Implementa il protocollo MediaHeartbeatDelegate .
var mediaDelegate = new MediaHeartbeatDelegate();

// Inizializza

var appMeasurement = new AppMeasurement(); appMeasurement.visitor = visitor; appMeasurement.trackingServer = Configuration.APP_MEASUREMENT.TRACKING_SERVER; appMeasurement.account = Configuration.APP_MEASUREMENT.RSID; appMeasurement.pageName = Configuration.APP_MEASUREMENT.PAGE_NAME; appMeasurement.charSet = Configuration.APP_MEASUREMENT.CHAR_SET; var contextData = { pageURL: document.URL, isUserLoggedIn: &quot;false&quot;, tvStation: &quot;Stazione TV campione&quot;, programmatore: &quot;Khurshid Alam&quot; }; var mediaInfo; var videostarted = false; var metaDataLoaded = false;



<b>PASSAGGIO 7: Aggiungi azioni - Codice API YouTube IFrame</b>

1. Seleziona &quot;Core&quot; dal menu a discesa Estensione .
2. Seleziona &quot;Codice personalizzato&quot; dal menu a discesa Tipo azione .
3. Aggiungi nome azione nella casella di testo Nome.
4. Selezionare &quot;Javascript&quot; in Lingua.
5. Selezionare &quot;Esegui globalmente&quot;.
6. Fare clic su &quot;Open Editor&quot;.
7. Aggiungi il codice seguente e fai clic su salva.


// 2. Questo codice carica il codice API di IFrame Player in modo asincrono.

var tag = document.createElement(&#39;script&#39;); tag.src = &quot;https://www.youtube.com/iframe_api&quot;; var firstScriptTag = document.getElementsByTagName(&#39;script&#39;)0; firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// 3. Questa funzione crea un iframe (e YouTube player) // dopo il download del codice API.

var player; funzione onYouTubeIframeAPIReady() { console.log(&quot;onYouTubeIframeAPIReady chiamato...&quot;);        player = new YT.Player(&#39;player&#39;, { height: &#39;390&#39;, larghezza: &#39;640&#39;, videoId: &#39;xWYHvIjvMnY&#39;, eventi: { &#39;onReady&#39;: onPlayerReady, &#39;onStateChange&#39;: onPlayerStateChange, &#39;onPlaybackQualityChange&#39;: onPlayerPlaybackQualityChange, &#39;onPlaybackRateChange&#39;: onPlayerPlaybackRateChange, &#39;onError&#39;: onPlayerError } }); }

// 4. L’API chiamerà questa funzione quando il lettore video è pronto.

function onPlayerReady(event) { metaDataLoaded = true;        player.playVideo(); }

// 5. L&#39;API chiama questa funzione quando lo stato del lettore cambia.
// La funzione indica che durante la riproduzione di un video (state=1), // il lettore deve essere riprodotto per sei secondi e quindi arrestarsi.

function onPlayerStateChange(event) { switch (event.data){ case YT.PlayerState.PLAYING:  console.log(&quot;\*\*\*HB In ascolto&quot;);                      if(metaDataLoaded){ if (Math.floor(event.target.getCurrentTime()) == 0) { console.log(&quot;\*\*\*HB Start&quot;);                                    MediaHeartbeat = ADB.va.MediaHeartbeat;                                    mediaInfo = MediaHeartbeat.createMediaObject( event.target.getVideoData().title, event.target.getVideoData().video_id, Math.floor(event.target.getDuration()), MediaHeartbeat.StreamType.VOD );                                     MediaHeartbeat = new MediaHeartbeat(mediaDelegate, mediaConfig, appMeasurement);                                    mediaDelegate.getCurrentPlaybackTime = function() { return Math.floor(event.target.getCurrentTime());                            };                                    MediaHeartbeat.trackSessionStart(mediaInfo, contextData);                                    MediaHeartbeat.trackPlay();                                    videostarted = true;                      } else { console.log(&quot;\*\*\*HB Play&quot;);                            MediaHeartbeat.trackPlay();                      }} break;               case YT.PlayerState.PAUSED:                      console.log(&quot;\*\*\*HB Pause&quot;);                      MediaHeartbeat.trackPause();                      break;               case YT.PlayerState.ENDED:                      console.log(&quot;\*\*\*HB Ended&quot;);                      MediaHeartbeat.trackComplete();                      MediaHeartbeat.trackSessionEnd();                      break;               caso -1:                      console.log(&quot;\*\*\*HB Scaricato&quot;);                      MediaHeartbeat.trackComplete();                      MediaHeartbeat.trackSessionEnd();                      break;        }

}

function onPlayerPlaybackQualityChange(event) { console.log(&quot;onPlayerPlaybackQualityChange: event.data: &quot;+ event.data); }

funzione onPlayerPlaybackRateChange(event) { console.log(&quot;onPlayerPlaybackRateChange: event.data: &quot;+ event.data); }

function onPlayerError(event) { console.log(&quot;onPlayerError: event.data: &quot;+ event.data); }



<b>PASSAGGIO 8: Aggiungi HTML</b>

Aggiungi il seguente codice nel codice HTML.

!-- 1. L’iframe (e il lettore video) sostituirà questo tag div. — div id=&quot;player&quot;/divbr

<b>PASSAGGIO 8: Pubblica</b>

Pubblica la proprietà e verifica.


