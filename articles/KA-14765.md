---
title: Installazione di SFTP/SSH Server su Windows tramite OpenSSH
description: Descrizione
solution: Campaign
product: Campaign
applies-to: Campaign Classic,Campaign,Campaign Standard
keywords: KCS
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Ananya Kuthiala
article-created-date: 5/10/2022 2:03:40 PM
article-published-by: Ananya Kuthiala
article-published-date: 5/10/2022 2:05:42 PM
version-number: 2
article-number: KA-14765
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=f3e81ffc-69d0-ec11-a7b5-0022480a8e40
exl-id: 55dd5fef-0cf7-4db4-92b5-65aa7577e589
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '728'
ht-degree: 0%

---

# Installazione di SFTP/SSH Server su Windows tramite OpenSSH

## Descrizione


Scopo del presente documento per consentire al team di supporto o al consulente di installare il server sftp/ssh sul computer locale.

Questo documento è per coloro che lavorano su Windows Machine. Per MAC l&#39;articolo sarà pubblicato a breve.


## Risoluzione


<b>Installazione del server SFTP/SSH:</b>

<b>In Windows 10:</b>

- In <b>*Impostazioni</b>* app, vai a <b>*App e funzionalità Gestione delle funzionalità facoltative</b>*.
- Individua il <b>*&quot;Server OpenSSH&quot;</b>* espanderla, quindi selezionare <b>*Installa</b>*.


I binari sono installati in <b>%WINDIR%\System32\OpenSSH</b>. Il file di configurazione (sshd_config) e le chiavi host sono installati <b>a %ProgramData%\ssh</b> (solo dopo il primo avvio del server).

È comunque possibile utilizzare la seguente installazione manuale per installare una versione di OpenSSH più recente di quella integrata in Windows 10.

<b>Nelle versioni precedenti di Windows:</b>

- Scarica la versione più recente [OpenSSH per binari Windows](https://github.com/PowerShell/Win32-OpenSSH/releases "https://github.com/PowerShell/Win32-OpenSSH/releases") (pacchetto OpenSSH-Win64.zip o OpenSSH-Win32.zip)
- In qualità di amministratore, estrai il pacchetto su C:\Program Files\OpenSSH
- Come amministratore, installa *sshd* e *ssh-agent* servizi:


powershell.exe -ExecutionPolicy Bypass -File install-sshd.ps1



<b>Configurazione del server SSH</b>

Parte superiore del modulo

Parte inferiore del modulo

- Consenti connessioni in ingresso al server SSH in Windows Firewall:

   - Eseguire il seguente comando PowerShell (solo Windows 8 e 2012 o versioni successive) come amministratore:


New-NetFirewallRule -Name sshd -DisplayName &#39;OpenSSH SSH Server&#39; -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22

- 
   - o vai a *Pannelli di controllo Campaign System e Security Windows Firewall*[ 1](https://winscp.net/eng/docs/guide_windows_openssh_server#fn1)*Impostazioni avanzate delle regole in entrata* e aggiungi una nuova regola per la porta 22.
- Avvia il servizio e configura l&#39;avvio automatico:

   - Vai a *Strumenti di amministrazione del sistema di Pannello di controllo Campaign e della sicurezza* e aperto *Servizi*. Individua *Server SSH OpenSSH* servizio.
   - Se si desidera che il server si avvii automaticamente all&#39;avvio del computer: Vai a *Proprietà azione*. Nella finestra di dialogo Proprietà, modifica la *Tipo di avvio* a *Automatico* e confermare.
   - Avvia la *Server SSH OpenSSH* facendo clic sul pulsante *Avvia il servizio*.


NOTA: È possibile fare riferimento a questa esercitazione video per abilitare ed eseguire il server OpenSSH: [https://www.youtube.com/watch?v=0G1Qh-_jBTQ](https://www.youtube.com/watch?v=0G1Qh-_jBTQ)



<b>Configurazione dell’autenticazione a chiave pubblica SSH</b>
<br><br> <br><br>
Segui una guida generica per [Configurazione dell’autenticazione a chiave pubblica SSH](https://winscp.net/eng/docs/guide_public_key) nel server OpenSSH \*nix, con la seguente differenza:

- Crea il `.ssh` (per `authorized_keys` nella cartella del profilo dell&#39;account Windows (in genere in `C:\Users\username\.ssh`).
- Per le autorizzazioni di `.ssh` cartella e `authorized_keys` file, ciò che conta sono le autorizzazioni ACL di Windows, non semplici autorizzazioni \*nix. Imposta l&#39;ACL in modo che solo un rispettivo account Windows abbia accesso in scrittura alla cartella e al file (qual è il livello di accesso predefinito se crei la cartella e il file durante l&#39;accesso utilizzando il rispettivo account).


<b>Connessione al server</b>
<br><br> <br><br><b>Ricerca della chiave host</b>
Prima della prima connessione, scopri l’impronta digitale della chiave host del server utilizzando `ssh-keygen.exe` per ogni file.

<b>Nel prompt dei comandi di Windows, utilizzare: </b>


```
for %f in (%ProgramData%\ssh\ssh_host_*_key) do @%WINDIR%\System32\OpenSSH\ssh-keygen.exe -l -f "%f"
```


*Sostituisci *`%WINDIR%\System32`*con *`%ProgramFiles%`*, se del caso.*

<b>In PowerShell, utilizzare: </b>


```
Get-ChildItem $env:ProgramData\ssh\ssh_host_*_key | ForEach-Object { . $env:WINDIR\System32\OpenSSH\ssh-keygen.exe -l -f $_ }
```


*Sostituisci *`$env:WINDIR\System32`*con *`$env:ProgramFiles`*, se del caso.*

Otterrai un output come questo:


```
C:\Windows\System32\OpenSSHfor %f in (%ProgramData%\ssh\ssh_host_*_key) do @%WINDIR%\System32\OpenSSH\ssh-keygen.exe -l -f "%f"
```



```
1024 SHA256:K1kYcE7GHAqHLNPBaGVLOYBQif04VLOQN9kDbiLW/eE martin@example (DSA)
```



```
256 SHA256:7pFXY/Ad3itb6+fLlNwU3zc6X6o/ZmV3/mfyRnE46xg martin@example (ECDSA)
```



```
256 SHA256:KFi18tCRGsQmxMPioKvg0flaFI9aI/ebXfIDIOgIVGU martin@example (ED25519)
```



```
2048 SHA256:z6YYzqGiAb1FN55jOf/f4fqR1IJvpXlKxaZXRtP2mX8 martin@example (RSA)
```




<b>Collegamento</b>
<br><br> <br><br>
Avvia WinSCP. [Finestra di dialogo di accesso](https://winscp.net/eng/docs/ui_login) apparirà. Nella finestra di dialogo:

- Assicurati che *Nuovo sito* è selezionato.
- Sulla *Nuovo nodo del sito*, assicura *SFTP* Protocollo selezionato.
- Immetti l&#39;indirizzo IP del computer/server (o un nome host) nel *Hostname* scatola.
- Immetti il nome dell&#39;account Windows nel *Nome utente* scatola. Se viene eseguito su un dominio, potrebbe essere necessario immetterlo nel formato user@domain.
- Per un’autenticazione a chiave pubblica:

   - Premere *Avanzate* per aprire [Finestra di dialogo Impostazioni sito avanzate](https://winscp.net/eng/docs/ui_login_advanced) e vai a *[Pagina di autenticazione SSH](https://winscp.net/eng/docs/ui_login_authentication)*.
   - In *File di chiave privata,* la casella seleziona il file di chiave privata.
   - Invia la finestra di dialogo Impostazioni sito avanzate con *OK* pulsante .
- Per l&#39;autenticazione tramite password:

   - Immetti la password del tuo account Windows nel *Password* scatola.
   - Se l&#39;account Windows non dispone di una password, non è possibile effettuare l&#39;autenticazione con l&#39;autenticazione tramite password (ad esempio, con una password vuota); devi utilizzare l’autenticazione a chiave pubblica.
- Salva le impostazioni del sito utilizzando *Salva* pulsante .
- Accedi utilizzando il *Login* pulsante .
- [Verifica la chiave host](https://winscp.net/eng/docs/ssh_verifying_the_host_key) confrontando le impronte digitali con quelle raccolte in precedenza (cfr. sopra).
