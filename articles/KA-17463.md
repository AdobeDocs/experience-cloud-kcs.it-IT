---
title: "URL personalizzati del dispatcher"
description: Descrizione
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: “KCS”
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Krunal Oza
article-created-date: "2/2/2023 10:54:02 AM"
article-published-by: Krunal Oza
article-published-date: "2/24/2023 11:47:31 AM"
version-number: 3
article-number: KA-17463
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=9a85c1e3-e7a2-ed11-aad1-6045bd006149"
source-git-commit: a55d50a828bce3ea2d70b8056cce79144bb37bb6
workflow-type: tm+mt
source-wordcount: '1013'
ht-degree: 3%

---

# URL personalizzati del dispatcher

## Descrizione {#description}

<b>Ambiente</b>
Experience Manager


<b>Problemi/Sintomi</b>
Questo documento ti aiuterà a capire come AEM gli URL personalizzati e alcune tecniche aggiuntive che utilizzano regole di riscrittura per mappare il contenuto più vicino al bordo della consegna

Cosa sono gli URL personalizzati

Se hai contenuti che risiedono in una struttura di cartelle che ha senso, non sempre si trovano in un URL a cui è facile fare riferimento.  Gli URL personalizzati sono come collegamenti.  URL più brevi o univoci che fanno riferimento a dove si trova il contenuto reale.

Esempio: <b>/aboutus</b> indicato <b>/content/we-retail/us/en/about-us.html</b>

Gli autori AEM possono impostare le proprietà dell’url personalizzato su un contenuto in AEM e pubblicarlo.

Affinché questa funzione funzioni, dovrai regolare i filtri del dispatcher per consentire il reindirizzamento.  Questo diventa irragionevole quando regoli i file di configurazione del dispatcher alla velocità con cui gli autori dovrebbero impostare queste voci di pagina personalizzate.

Per questo motivo il modulo dispatcher dispone di una funzione per consentire automaticamente tutto ciò che è elencato come reindirizzamento nella struttura dei contenuti.


## Risoluzione {#resolution}


Come funziona


Authoring di URL personalizzati

L’autore visita una pagina in AEM e visita le proprietà della pagina e aggiunge voci nella sezione URL personalizzato.
Una volta salvate le modifiche e attivate la pagina, il reindirizzamento viene ora assegnato a questa pagina.
Interfaccia utente touch:
![](assets/c1e59dbd-38b4-ed11-83fe-6045bd006149.png)![](assets/c3e59dbd-38b4-ed11-83fe-6045bd006149.png)


Ricerca contenuti classica:
![](assets/c2e59dbd-38b4-ed11-83fe-6045bd006149.png)![](assets/c4e59dbd-38b4-ed11-83fe-6045bd006149.png)
Nota: Comprendere che questo è molto vulnerabile ai problemi di spazio dei nomi.
Le voci personalizzate sono globali per tutte le pagine, questo è solo uno dei difetti per i quali è necessario pianificare soluzioni alternative. Ne spiegheremo alcuni più tardi.
Risoluzione/mappatura delle risorse

Ogni voce di reindirizzamento personalizzato è una voce di mappa sling per un reindirizzamento interno.
Queste mappe sono visibili visitando la console Felix AEM istanze (<b>/system/console/jcrresolver</b>) Ecco una schermata della voce mappa creata da una voce di reindirizzamento:
![](assets/c5e59dbd-38b4-ed11-83fe-6045bd006149.png)



Nell’esempio precedente, quando chiediamo all’istanza AEM di visitare /aboutus, si risolverà in /content/we-retail/us/en/about-us.html

Filtri di autorizzazione automatica del Dispatcher

Il Dispatcher in uno stato sicuro filtra le richieste nel percorso / attraverso il Dispatcher, perché è la radice della struttura JCR.
È importante assicurarsi che gli editori consentano solo i contenuti da /content e altri percorsi sicuri, ecc.. e non percorsi come /system ecc... Ecco il problema, gli url personalizzati vivono nella cartella base di / quindi come possiamo consentire loro di raggiungere gli editori mantenendo la sicurezza?
Il dispatcher semplice dispone di un meccanismo di filtro automatico per consentire l’installazione di un pacchetto AEM e quindi configura il Dispatcher in modo che punti alla pagina dei pacchetti.
[https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/granite/vanityurls-components](https://experience.adobe.com/#/downloads/content/software-distribution/it/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/granite/vanityurls-components)
Dispatcher ha una sezione di configurazione nel suo file farm:


<b>/vanity_urls {</b><b> </b><b>    </b><b> </b><b>/url &quot;/libs/granite/dispatcher/content/vanityUrls.html&quot;</b><b> </b><b>    </b><b> </b><b>/file &quot;/tmp/vanity_urls&quot;</b><b> </b><b>    </b><b> </b><b>/ritardo 300</b><b> </b><b>}</b>

 
Questa configurazione comunica al Dispatcher di recuperare l’URL dall’istanza AEM che esegue ogni 300 secondi per recuperare l’elenco degli elementi che desideri consentire.
Memorizza la sua cache della risposta nell&#39;argomento /file, quindi in questo esempio /tmp/vanity_urls Quindi se visiti l&#39;istanza AEM all&#39;URI vedrai cosa recupera:
![](assets/c6e59dbd-38b4-ed11-83fe-6045bd006149.png)



È un elenco super semplice.

Riscrittura delle regole come regole personalizzate

Perché menzionare l’utilizzo di regole di riscrittura invece del meccanismo predefinito integrato in AEM come descritto sopra?
Semplicemente, problemi di spazio dei nomi, prestazioni e logica di livello superiore che possono essere gestiti meglio.
Passiamo ora a un esempio della voce di reindirizzamento a microsito */aboutus* al suo contenuto */content/we-retail/us/en/about-us.html* utilizzando il modulo mod_rewrite di Apache per eseguire questa operazione.

<b>RewriteRule /aboutus /content/we-retail/us/en/about-us.html PT,L,NC</b>


Questa regola cerca il reindirizzamento /aboutus e recupera il percorso completo dal renderer con il flag PT (Pass Through).
Smetterà inoltre di elaborare tutte le altre regole L flag (Last) che significa che non dovrà attraversare un enorme elenco di regole come JCR Resolving deve fare.
Oltre a non dover delegare la richiesta e attendere che l&#39;editore AEM risponda questi due elementi di questo metodo, lo rendono molto più performante.
Poi la ciliegina sulla torta qui è il flag NC (No Case-Sensitive) che significa che se un cliente sbaglia l&#39;URI con /AboutUs invece di /aboutus, funzionerà ancora e permetterà di recuperare la pagina giusta.
Per creare una regola di riscrittura a questo scopo, crei un file di configurazione sul Dispatcher (ad esempio: /etc/httpd/conf.d/rewrites/examplevanity_rewrite.rules) e includilo nel file .vhost che gestisce il dominio che richiede l’applicazione di questi url personalizzati.
Di seguito è riportato un frammento di codice di esempio dell’elemento include inside

/etc/httpd/conf.d/enabled_vhosts/we-retail.vhost VirtualHost \*:80 ServerName weretail.com ServerAlias www.weretail.com ....... SNIP .......     IfModule mod_rewrite.c ReWriteEngine su LogLevel avvisa rewrite:info Include /etc/httpd/conf.d/rewrites/examplevanity_rewrite.rules / IfModule ....... SNIP ......./VirtualHost



Quale metodo e dove


L&#39;utilizzo di AEM per controllare le voci personalizzate presenta i seguenti vantaggi

- Gli autori possono crearli immediatamente
- Vivono con il contenuto e possono essere confezionati con il contenuto


L&#39;utilizzo di mod_rewrite per controllare le voci personalizzate presenta i seguenti vantaggi

- Risoluzione più rapida dei contenuti
- Più vicino al bordo delle richieste di contenuto degli utenti finali
- Maggiore estensibilità e opzioni per controllare la mappatura del contenuto su altre condizioni
- Può non fare distinzione tra maiuscole e minuscole


Utilizza entrambi i metodi, ma di seguito sono riportati i consigli e i criteri da utilizzare quando:

- Se il reindirizzamento è temporaneo e prevede bassi livelli di traffico, utilizza la funzione integrata AEM
- Se il reindirizzamento è un endpoint di base che non cambia spesso e viene utilizzato frequentemente, utilizza una regola mod_rewrite.
- Se lo spazio dei nomi personalizzato (ad esempio: /aboutus) deve essere riutilizzato per un sacco di marchi sulla stessa istanza AEM poi utilizzare le regole di riscrittura.


Nota: Se desideri utilizzare la funzione di reindirizzamento AEM ed evitare lo spazio dei nomi, puoi creare una convenzione di denominazione.  Utilizzo di URL personalizzati nidificati come /brand1/aboutus, brand2/aboutus, brand3/aboutus
