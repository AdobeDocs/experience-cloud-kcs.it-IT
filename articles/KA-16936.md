---
title: "AEM reindirizza l’utente all’indirizzo http quando si accede tramite load balancer con terminazione SSL/TLS | AEM"
description: Descrizione
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/AEM-redirecting-back-to-http-on-accessed-via-SSL-terminated-Load-Balancer.html"
bug: false
article-created-by: Emily Geary
article-created-date: "4/12/2021 6:21:34 PM"
article-published-by: Emily Geary
article-published-date: "4/12/2021 6:26:15 PM"
version-number: 1
article-number: KA-16936
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=684ec8e8-bb9b-eb11-b1ac-000d3a3680d8"
exl-id: 52e50c09-67f2-46a2-90a7-df769d76a0dd
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: tm+mt
source-wordcount: '341'
ht-degree: 1%

---

# AEM reindirizza l’utente a http quando vi si accede tramite load balancer con terminazione SSL/TLS | AEM

## Descrizione


Quando accedi a AEM tramite un load balancer (o CDN) con terminazione SSL, AEM reindirizza da https a http.

La terminazione SSL al load balancer significa che i certificati SSL sono installati nel load balancer. L&#39;utente finale accede al sito tramite `https://`, e il Dispatcher/Web Server e AEM sono accessibili sul back-end con `http://`.



<b>Causa</b>

Diversi load balancer inviano intestazioni diverse per notificare ai sistemi back-end che SSL è terminato a monte. Ad esempio: [Amazon ELB utilizza l’intestazione &quot;X-Forwarded-Proto: https&quot;](https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/x-forwarded-headers.html#x-forwarded-proto).


## Risoluzione


Per risolvere il problema:

<b>I. Aggiornare Dispatcher `/clientheaders` configurazione</b>

Consulta la documentazione del load balancer per individuare l’intestazione impostata per notificare ai sistemi a valle che SSL è stato terminato. Per semplicità, si presuppone che l’intestazione HTTP corretta sia *`X-Forwarded-Proto: https`*

1. Accedi al server del dispatcher.
2. Apri la farm del dispatcher `.any` configurazione.
3. Aggiungi l’intestazione al `/clientheaders` sezione .


Se utilizzi un dispatcher senza load balancer o se il load balancer o il proxy non riesce a impostare il `X-Forwarded-Proto` quindi puoi impostarlo a livello di server web o dispatcher. Se utilizzi [!DNL Apache HTTP Server], quindi aggiorna HTTPS VirtualHost con questa direttiva:


| 1 | `RequestHeader ` `set` `X-Forwarded-Proto ` `"https"` |
| --- | --- |


<b>II. Aggiornare le configurazioni dell’intestazione:</b>

1. Vai a *http://host:port*/system/console/configMgr/org.apache.felix.http.sslfilter.SslFilter e accedi come amministratore.
2. Imposta l’intestazione di inoltro SSL su `X-Forwarded-Proto`.
3. Imposta il valore di inoltro SSL su https.
4. Fai clic su Salva.


Nota:

Non esiste uno standard per le intestazioni reverse proxy che dicono al back-end quale protocollo viene utilizzato. Tuttavia, ecco alcuni esempi noti:

- ELB Amazon ([!DNL Elastic Load Balancer]) utilizza il `X-Forwarded-Proto: https` intestazione.
- [!DNL Amazon Cloudfront] CDN utilizza `X-Cloudfront-Proto: https` intestazione.


<b>III. Aggiorna la configurazione Jetty OSGi (AEM 6.3 e versioni successive)</b>

In AEM 6.3 e versioni successive è necessaria una configurazione aggiuntiva:

- Accedi a http://aem-host:port/system/console/configMgr/org.apache.felix.http.
- Abilita l’impostazione <b>Abilita connessione Proxy/Load Balancer</b>e salvalo.
