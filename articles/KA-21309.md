---
title: "Adobe Experience Manager: Esempi di request.log analysis"
description: Descrizione
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: “KCS”
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Nobuhiro Hashimoto
article-created-date: "1/24/2023 5:01:17 AM"
article-published-by: Nobuhiro Hashimoto
article-published-date: "1/24/2023 12:09:25 PM"
version-number: 1
article-number: KA-21309
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=a33bb020-a49b-ed11-aad1-6045bd006239"
source-git-commit: afded50ce53d99e1170dc822f940f879cfaea426
workflow-type: tm+mt
source-wordcount: '978'
ht-degree: 0%

---

# Adobe Experience Manager: Esempi di analisi request.log

## Descrizione {#description}


AEM request.log contiene varie informazioni utili, come il tempo di risposta, per l&#39;analisi dei problemi di prestazioni. Ecco un elenco di esempi di analisi che utilizzano i comandi Linux (inclusi alcuni comandi esterni).

<b>Ambienti</b>
AEM 6.5, Linux(Bash)


## Risoluzione {#resolution}

Sommario:<br><br>
<b>Introduzione</b>
  Formato di request.log

<b>Preparazione</b>
  Passaggio 1: Pulizia dei dati Passaggio 2. Ora di riavvio Passaggio 3. Numero di accessi all&#39;ora Passaggio 4. Massimo processo simultaneo Passo 5. Dividere un file di registro Passaggio 6. Unisci record di richiesta e record di risposta

<b>Esempi di analisi</b>
  Esempio 1. L&#39;accesso più pesante all&#39;esempio 2. Accede alla risposta mancante Esempio 3. Accesso lento Esempio 4. Dati della serie temporale del tempo di risposta Esempio 5. Minimo, medio (medio), mediano, tempo massimo di risposta Esempio 6. Numero di accessi per un periodo Esempio 7. Numero di stati di risposta per un periodo Esempio 8. URL più frequenti, esempio 9. record access.log per un record request.log

<b>Conclusione</b>

<br>Introduzione<br><br>Formato di request.log<br><br>
AEM 6.5 genera request.log nel seguente formato per impostazione predefinita. A causa di una limitazione del sistema, le righe dei comandi in questo articolo vengono visualizzate come immagini invece che come testo normale.

Esempio di request.log:
![](assets/e51bfd97-dd9b-ed11-aad1-6045bd006793.png)





In questo articolo, mi riferisco a una riga con &quot;-&quot; come &quot;record di richiesta&quot;. Una riga con &quot;-&quot; è un &quot;record di risposta&quot;.

<b>Richiedi record</b>
  Quando una richiesta viene ricevuta da AEM, viene registrato un record di richiesta. Contiene la data e l’ora di ricezione, l’ID della richiesta, il metodo della richiesta e l’URL.

<b>Record di risposta</b>
  Quando AEM risponde a una richiesta, viene registrato un record di risposta. Contiene la data e l’ora della risposta, l’ID della richiesta, il codice di stato, il tipo di contenuto e il tempo di risposta (in millisecondi).

Vedere anche il manuale corrispondente: https://experienceleague.adobe.com/docs/experience-manager-65/deploying/configuring/monitoring-and-maintaining.html?lang=en#interpreting-the-request-log

<br>Preparazione<br><br>Passaggio 1: Pulizia dei dati<br><br>
Prima di immergersi nell&#39;analisi di request.log, è importante standardizzare i record di log.

![](assets/2a1adef4-dd9b-ed11-aad1-6045bd006793.png)





Il primo comando utilizzato rimuove uno spazio aggiuntivo nei record di risposta Content-Type, per evitare la separazione errata del campo con lo spazio vuoto. Il comando ruby converte il formato della data in ISO 8601. Il comando rubino separa anche data e ora con spazio bianco invece di due punti.

<br>Passaggio 2: Ora di riavvio<br><br>
Il riavvio dell&#39;installazione di AEM e service pack reimposta l&#39;ID della richiesta di request.log. I record della richiesta con ID richiesta = 0 indicano che potrebbero esserci questi tipi di operazioni.

![](assets/777fcc1e-de9b-ed11-aad1-6045bd006793.png)













Nell’esempio precedente, gli ID richiesta sono stati reimpostati a 0 a 13:08:49と13:26:13.

<br>Passaggio 3: Numero di accessi all&#39;ora<br><br>
Conta il numero di accessi all&#39;ora e l&#39;intervallo di tempo del request.log.

![](assets/712fae49-de9b-ed11-aad1-6045bd006793.png)
<br><br> <br><br> <br><br> <br><br>
<br>Passaggio 4: Elaborazione simultanea massima<br><br>
Il numero di elaborazioni simultanee aiuta a indovinare il carico del server di AEM.

![](assets/7b359b5c-de9b-ed11-aad1-6045bd006793.png)







Per impostazione predefinita, il numero massimo di connessioni simultanee per Jetty in AEM è impostato su 200. Si verifica un ritardo nel rilascio del socket dopo il completamento della risposta. Quando il numero di elaborazioni simultanee supera i 170 circa, diventa impossibile accettare nuove richieste.

<br>Passaggio 5: Dividere un file di registro<br><br>
L&#39;ID della richiesta di request.log viene reimpostato quando AEM riavvia o viene installato un Service Pack. A causa di questo comportamento, l’analisi può essere errata quando un request.log contiene tali operazioni. Per eseguire un&#39;analisi accurata e ridurre la dimensione del file gestito in una sola volta, dividi il request.log utilizzando i record della richiesta con ID = 0.

![](assets/a342906e-de9b-ed11-aad1-6045bd006793.png)













<br>Passaggio 6: Unisci record di richiesta e record di risposta<br><br>
L’unione dei record di richiesta e risposta tramite ID richiesta facilita l’individuazione all’avvio dei problemi di prestazioni. Userò questo file di registro unito negli esempi successivi.

![](assets/e3848b8c-de9b-ed11-aad1-6045bd006793.png)







L’ultimo comando usato aggiunge una risposta fittizia ai record di richiesta che non hanno un record di risposta corrispondente. Possono inoltre essere presenti record di risposta senza record di richiesta. Ma sono ignorabili perché in genere non sono un problema da investigare.

Il file di registro unito deve essere simile al seguente:

![](assets/79f3829e-de9b-ed11-aad1-6045bd006793.png)
<br><br> <br><br> <br><br> <br><br>
<br>Esempi di analisi<br><br>Esempio 1. Gli accessi più pesanti<br><br>
Ordina il file di registro unito in base al tempo di risposta in ordine decrescente, inclusi gli accessi senza risposta.

![](assets/50d9b9da-de9b-ed11-aad1-6045bd006793.png)
<br><br> <br><br> <br><br> <br><br> <br><br>
<br>Esempio 2. Accede alla risposta mancante<br><br>
Gli accessi di estrazione non presentano i record di risposta corrispondenti utilizzando il tempo di risposta fittizio.

![](assets/7bf0beed-de9b-ed11-aad1-6045bd006793.png)







Se la tempistica della ricezione degli accessi senza risposta è correlata a un aumento del carico del server, questi accessi potrebbero aver generato problemi di prestazioni.

![](assets/4c86bdff-de9b-ed11-aad1-6045bd006793.png)
<br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br>
<br>Esempio 3 Accesso lenti<br><br>
Estrai accessi che hanno richiesto più di 10 secondi.

![](assets/028e0518-df9b-ed11-aad1-6045bd006793.png)











Quando il numero di hit è troppo elevato, sostituisci 0-9{5} con 0-9{6} nel comando grep per limitare gli accessi che richiedono più di 100 secondi.

<br>Esempio 4. Dati della serie temporale del tempo di risposta<br><br>
Per creare grafici è utile estrarre solo la marca temporale e il tempo di risposta dai dati.

![](assets/e200d731-df9b-ed11-aad1-6045bd006793.png)















L&#39;impossibilità di accedere che risponde immediatamente rende i dati più efficienti. Nell&#39;esempio seguente viene estratto l&#39;accesso che ha richiesto più di un secondo.

![](assets/ec4bd13d-df9b-ed11-aad1-6045bd006793.png)
<br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br>
<br>Esempio 5. Minimo, medio (medio), mediano, tempo massimo di risposta<br><br>


![](assets/523f6d50-df9b-ed11-aad1-6045bd006793.png)















L&#39;esempio precedente utilizza il comando datamash (https://www.gnu.org/software/datamash/) per l&#39;elaborazione statistica. Se il registro contiene accessi senza risposta, il valore fittizio influenzerà il risultato.

<br>Esempio 6. Numero di accessi per periodo<br><br>
Conta il numero di accessi per dieci minuti. Il risultato aiuta a determinare se il traffico di grandi dimensioni ha causato un problema di prestazioni.

![](assets/16ffe970-df9b-ed11-aad1-6045bd006793.png)







L’esempio seguente restringe i dati solo alle richieste POST. Un caso d’uso tipico consiste nel determinare se c’è una concentrazione di authoring o replica dei contenuti nel livello di pubblicazione.

![](assets/9447dd7c-df9b-ed11-aad1-6045bd006793.png)


<br><br> <br><br> <br><br>
<br>Esempio 7. Numero di stati di risposta per un periodo<br><br>
Crea una tabella del numero di ogni stato di risposta per dieci minuti con il comando datamash.

![](assets/8a91d788-df9b-ed11-aad1-6045bd006793.png)
<br><br> <br><br> <br><br> <br><br>
<br>Esempio 8. URL più frequenti<br><br>
Stampa i primi tre URL a cui è stato effettuato l’accesso più frequentemente ogni dieci minuti.

![](assets/a04efc9a-df9b-ed11-aad1-6045bd006793.png)


<br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br>
<br>Esempio 9. record access.log per un record request.log<br><br>
Cerca access.log per i record che corrispondono a un particolare ID richiesta.

![](assets/891a02ad-df9b-ed11-aad1-6045bd006793.png)











Se si sono verificati più accessi allo stesso URL contemporaneamente, il risultato mostra più record access.log per un singolo ID richiesta.

<br>Conclusione<br><br>
Spero che gli esempi contenuti in questo articolo ti aiuteranno ad analizzare i tuoi problemi di prestazioni.

Gli esempi elencati sono stati testati su CentOS 7.5 e Ubuntu 22.04LTS, ma potrebbero non funzionare come previsto a seconda dell&#39;ambiente, ad esempio versioni diverse o varianti dei comandi. Regolare di conseguenza i comandi installati nell&#39;ambiente.


