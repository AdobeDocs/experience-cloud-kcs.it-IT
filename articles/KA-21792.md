---
title: "Modifiche nella gestione di GraphQL dei valori nulli | AEM"
description: Descrizione
solution: Experience Manager as a Cloud Service
product: Experience Manager as a Cloud Service
applies-to: "Experience Manager as a Cloud Service"
keywords: "KCS, Adobe Experience Manager, GraphQL"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Amol Mahajan
article-created-date: "4/13/2023 9:17:41 AM"
article-published-by: Amol Mahajan
article-published-date: "4/13/2023 9:21:00 AM"
version-number: 5
article-number: KA-21792
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=08653c06-dcd9-ed11-a7c7-6045bd006ce9"
source-git-commit: 9ac840b18bef6f67809788cec991fe968b97d365
workflow-type: tm+mt
source-wordcount: '0'
ht-degree: 0%

---

# Modifiche nella gestione di GraphQL dei valori nulli | AEM

## Descrizione {#description}

<b>Ambiente</b><br><br>Experience Manager as a Cloud Service<br><br> <br><br><b>Problema/Sintomi</b><br><br>Nella versione 2023.02.11382 sono stati apportati alcuni miglioramenti nel <b>GraphQL</b> Implementazione (Open-Source Query Language) che potrebbe causare un comportamento imprevisto nel codice dell&#39;applicazione, nel caso in cui si sia basato sul comportamento errato delle versioni precedenti. 
<br>La risoluzione riportata di seguito aiuta a ottenere che Adobe Experience Manager (AEM) GraphQL restituisce ora il contenuto con *null* valori costanti per tutte le operazioni di filtro. <br>

## Risoluzione {#resolution}

<b>`CONTAINS_NOT` e *null* values</b><br> <br>La prima modifica influisce sulle condizioni del filtro che sfruttano `CONTAINS_NOT` operatore. Nelle versioni precedenti, questo `CONTAINS_NOT` non ha restituito frammenti di contenuto contenenti *null* nel campo a cui è stata applicata la condizione del filtro. Ciò non è coerente con operatori simili come `EQUALS_NOT` o `NOT_AT`.<br>Assicurati che l&#39;applicazione client sia in grado di gestire *null* valori restituiti da AEM quando si utilizza `CONTAINS_NOT`.<br> <br><b>Esempio:</b>

| <b>Filtro frammento</b> | <b>Dati</b> | <b>Risultato prima del 2023.02.11382</b> | <b>Risultato a partire da 2023.02.11382</b> |
| --- | --- | --- | --- |
| myField: {<br>    valore: &quot;frag&quot;, <br>    _op: CONTAINS_NOT<br>} | <br>    {<br>        myField: null<br>    }, <br>    {<br>        myField: &quot;Testo&quot;<br>    },<br>    {<br>        myField: &quot;Frammento di testo&quot;<br>    }<br> | <br>    {<br>        myField: &quot;Testo&quot;<br>    }<br> | <br>    {<br>        myField: null<br>    },<br>    {<br>        myField: &quot;Testo&quot;<br>    }<br> |

<b>Applicare le modalità `ALL_OR_EMPTY/ALL` e *null* values</b>
Un altro problema risolto nel 2023.02.11382 è relativo a *null* in condizioni di filtro per campi con più valori. Modalità Applica `ALL_OR_EMPTY` (su array/campi multivalore) non restituiva frammenti con *null* valori per il campo in questione, quindi funzionava effettivamente come previsto per il `ALL` metodo di applicazione. Allo stesso tempo, filtrare un campo con più valori con modalità di applicazione `ALL` includerebbe frammenti con contenuto vuoto per quel campo, ma non dovrebbe. Si consiglia di testare le query che utilizzano una di queste modalità di applicazione e modificarle se non restituiscono più il risultato previsto impostato nel 2023.02.11382.

Il problema esisteva solo per alcuni operatori (prima del 2023.02.11382).
Ad esempio: `EQUALS_NOT` ha funzionato come previsto per il metodo di applicazione `ALL_OR_EMPTY`, considerando che `CONTAINS` No.
<b>Esempio:</b>

| <b>Filtro frammento</b> | <b>Dati</b> | <b>Risultato prima del 2023.02.11382</b> | <b>Risultato a partire da 2023.02.11382</b> |
| --- | --- | --- | --- |
| myArray: {<br>  _espressioni: {<br>    valore: &quot;1.3&quot;<br>    _operatore: EQUALS_NOT<br>    _applica: TUTTO<br>  }<br>} | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;1.1&quot;, &quot;1.2&quot;, &quot;1.3&quot; <br>  },<br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> |
| myArray: {<br>  _espressioni: {<br>    valore: &quot;2.&quot;<br>    _operatore: CONTENITORI<br>    _applica: ALL_OR_EMPTY<br>  }<br>} | <br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> |

<b>Applicare le modalità: `INSTANCES`, `_instances: 0` e *null* values</b>
L&#39;ultimo problema riguarda anche *null* in condizioni di filtro per campi con più valori. Modalità Applica `INSTANCES` con`_instances: 0` non corrispondono ai frammenti di contenuto che contengono *null* valori nel rispettivo campo prima di 2023.02.11382, ma inizierà con 2023.02.11382. Si consiglia di testare le query che utilizzano questa costellazione e modificarle se non restituiscono il risultato previsto impostato nel 2023.02.113 Ancora 82.
<b>Esempio:</b>

| <b>Filtro frammento</b> | <b>Dati</b> | <b>Risultato prima del 2023.02.11382</b> | <b>Risultato a partire da 2023.02.11382</b> |
| --- | --- | --- | --- |
| myArray: {<br>  _espressioni: {<br>    valore: &quot;2.&quot;<br>    _operatore: CONTENITORI<br>    _applica: ISTANZE<br>    _istanze: 0<br>  }<br>} | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;1.1&quot;, &quot;1.2&quot;, &quot;1.3&quot; <br>  },<br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray: &quot;1.1&quot;, &quot;1.2&quot;, &quot;1.3&quot; <br>  }<br> | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;1.1&quot;, &quot;1.2&quot;, &quot;1.3&quot; <br>  }<br> |

<b>Miglioramenti che possono influenzare i clienti con `ft-sites-97` abilitato</b>
Clienti che avevano `ft-sites-97`*(Paginazione GraphQL e filtro ottimizzato)* flag di funzione abilitato *prima*dopo l’aggiornamento alla versione 2023.02.11382 potrebbe verificarsi una o più delle seguenti modifiche al comportamento dopo l’aggiornamento alla versione 2023.02.11382. I clienti che non dispongono di questo flag di funzionalità abilitato non sono interessati da questa sezione.
<b>gestione null con condizioni che verificano la non uguaglianza</b>
Campi frammento con *null* i valori non corrispondevano a intermittenza ai filtri che verificavano la non uguaglianza.

Se il codice si basa su questi frammenti che non vengono restituiti, sarà necessario regolare il codice per adattarlo al comportamento previsto.


| <b>Filtro frammento</b> | <b>Dati</b> | <b>Risultato dell&#39;implementazione intermedia</b> | <b>Risultato dell&#39;implementazione finale</b> |
| --- | --- | --- | --- |
| myField: {<br>  valore: &quot;un testo&quot;,<br>  _op: EQUALS_NOT<br>} | <br>  {<br>    myField: null<br>  },<br>  {<br>    myField: &quot;Testo&quot;<br>  },<br>  {<br>    myField: &quot;Frammento di testo&quot;<br>  }<br> | <br>  {<br>    myField: &quot;Testo&quot;<br>  }<br> | <br>  {<br>    myField: null<br>  },<br>  {<br>    myField: &quot;Testo&quot;<br>  }<br> |

<b>Operatore filtro `NOT_AT` con valori data/ora</b>
Operatore filtro `NOT_AT` non funzionava in modo corretto con i valori data/ora. Invece stava funzionando più come il `AFTER` condizione. 
Se il codice si basa su un comportamento non corretto, devi impostare la condizione del filtro su `AFTER`.
<b>Array: `INSTANCES` con `_instances: 0` non funziona correttamente</b>
Condizione del filtro `INSTANCES` (su array/campi multivalore) con `_instances` impostato su 0 a intermittenza non funzionava come previsto, non restituiva nulla dove effettivamente avrebbe dovuto essere.

I frammenti filtrati interessati da questo problema saranno simili a: `doubleArray: { _expressions: { value: 0, _operator: GREATER, _apply: INSTANCES, _instances: 0 } }`

Se ti affidavi al comportamento errato, devi riscrivere la query per restituire gli stessi risultati di prima.


| <b>Filtro frammento</b> | <b>Dati</b> | <b>Risultato dell&#39;implementazione intermedia</b> | <b>Risultato dell&#39;implementazione finale</b> |
| --- | --- | --- | --- |
| myArray: {<br>  _espressioni: {<br>    valore: 20<br>    _operatore: UGUALE<br>    _applica: ISTANZE<br>    _istanze: 0<br>  }<br>} | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: 10, 20, 30 <br>  },<br>  {<br>    myArray: 11, 12, 13 <br>  }<br> |  | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: 11, 12, 13 <br>  }<br> |

