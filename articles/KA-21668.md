---
title: "Coda di distribuzione bloccata con AccessDeniedException"
description: Descrizione
solution: Experience Manager as a Cloud Service,Experience Manager
product: Experience Manager as a Cloud Service,Experience Manager
applies-to: "Experience Manager as a Cloud Service,Experience Manager"
keywords: “KCS”
resolution: Resolution
internal-notes: "See https://jira.corp.adobe.com/browse/SKYOPS-53409"
bug: false
article-created-by: Zita Rodricks
article-created-date: "4/11/2023 6:07:30 PM"
article-published-by: Krunal Oza
article-published-date: "5/3/2023 3:35:49 PM"
version-number: 6
article-number: KA-21668
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=0e63beb4-93d8-ed11-a7c7-6045bd006079"
source-git-commit: 3e883a612f075cfccb8dd79c0fb07640be92dc50
workflow-type: tm+mt
source-wordcount: '554'
ht-degree: 5%

---

# Coda di distribuzione bloccata con AccessDeniedException

## Descrizione {#description}

<b>Ambiente</b>
- Experience Manager
- Experience Manager as a cloud service



<b>Problemi/Sintomi</b><br>Quando si tenta di replicare alcuni contenuti di pagina (o XF e altri tipi di risorse) utilizzando &quot;Pubblicazione rapida&quot;, &quot;Gestisci pubblicazione&quot; o &quot;Replica&quot;, la coda di distribuzione sull&#39;autore ottiene <b>Bloccato</b>.<br> <br>Ciò può essere osservato controllando il *pubblicare* Coda di distribuzione dall’interfaccia utente di distribuzione (AEM - Strumenti - Distribuzione - Distribuzione):<br>![](assets/___1863beb4-93d8-ed11-a7c7-6045bd006079___.png)<br> <br>Selezionando la coda dell&#39;Editore dorato (voce in grassetto dall&#39;elenco), vengono forniti più dettagli e in particolare i soggetti coinvolti <b>PERCORSO</b> (possono essere presenti più elementi qui):<br>![](assets/___2363beb4-93d8-ed11-a7c7-6045bd006079___.png)<br> <br>Esaminare <b>Registri</b> tab mostrerà il seguente errore corrispondente:<br>03/03/2023 12:11:26:238 - INFO - Richiesta accettata con il pacchetto di distribuzione PackageMessage(pubSlingId=a1133c97-6809-411e-a435-4eea0ecbe889, reqType=ADD, pkgId=dstrpck-1 678277486031-63159f4b-c577-4079-8741-d41660597d20, pkgType=journal_filevault, pkgLength=6330, pubAgentName=publish, userId=replication-service, paths=/content/wknd/fr, deepPaths=) a offset=158705 2023/03/08 12:11:27:459 - AVVERTENZA - Messaggio: Tentativo non riuscito (0/infinito) di importare il pacchetto di distribuzione PackageMessage(pubSlingId=a1133c97-6809-411e-a435-4eea0ecbe889, reqType=ADD, pkgId=dstrpck-1677 8277486031-63159f4b-c577-4079-8741-d41660597d20, pkgType=journal_filevault, pkgLength=63 30, pubAgentName=publish, userId=replication-service, paths=/content/wknd/fr, deepPaths=) at offset=158705 a causa di &#39;javax.jcr.AccessDeniedException: OakAccess0000: Accesso negato. Verrà eseguito un nuovo tentativo dell&#39;importatore in seguito, Stacktrace: org.apache.sling.distribution.common.DistributionException: javax.jcr.AccessDeniedException: OakAccess0000: Accesso negato..<br> <br>Devi *Cancella coda* (o rimuovi quell&#39;elemento) per sbloccare la coda.

## Risoluzione {#resolution}


Nonostante l&#39;errore <b>`javax.jcr.AccessDeniedException`</b>, probabilmente non esiste alcuna relazione con l&#39;ACL / autorizzazioni per gli utenti del servizio di distribuzione, anche se questo dovrebbe essere considerato se lo scenario seguente non si applica al tuo caso.



Diagnostica

L&#39;errore di cui sopra può verificarsi in alcune situazioni, quando il contenuto replicato ha una configurazione specifica correlata allo speciale <b>jcr:lockIsDeep</b> proprietà.

Per confermare la diagnosi, è necessario controllare <b>ciascuno dei percorsi indicati</b> con uno dei seguenti strumenti a cui è possibile accedere/è applicabile:

1. CRX/DE per le istanze DEV
2. la [Browser del repository](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/implementing/developer-tools/repository-browser.html?lang=it)
3. creazione di un pacchetto di contenuti in Gestione pacchetti (questa opzione fa anche parte della risoluzione)


Poi devi controllare il <b>`jcr:content`</b> per ogni percorso trovato nell’interfaccia utente della coda di distribuzione e verifica se:

- It <b>does </b>hanno <b>`jcr:lockIsDeep`=&quot;(Boolean)true&quot;</b> property
- It <b>non </b>hanno <b>`jcr:lockOwner="xxx"`</b> property
- <b>(</b>it <b>non</b> hanno <b>`mix:lockable`</b> nel <b>`jcr:mixinTypes`</b>)


![](assets/e5fb7aa2-d8bd-ed11-83ff-6045bd0065b6.png)

Se questo è il caso, il problema viene confermato, dal momento che il <b>`jcr:lockIsDeep`</b> la proprietà non deve essere presente da sola. Questa proprietà deve sempre essere impostata insieme al <b>`jcr:lockOwner`</b> quando <b>Blocco</b> una pagina.

Non è possibile impostare solo il <b>`jcr:lockIsDeep`</b> , anche utilizzando l&#39;API JCR, quindi la causa principale che spiega questa situazione è principalmente l&#39;aver installato un pacchetto di contenuto &quot;danneggiato&quot; con quella singola proprietà.



<u><b>Risoluzione</b></u>

Per correggere il contenuto l&#39;unica soluzione è installare un pacchetto nell&#39;Autore con le proprietà corrette impostate sul nodo corrispondente.

Puoi creare quel pacchetto da un’altra istanza con il contenuto corrispondente, oppure se disponi solo di questo contenuto sull’istanza interessata, puoi seguire queste istruzioni:

1. genera un pacchetto sull&#39;istanza interrotta per la pagina difettosa
2. scarica il pacchetto
3. estrarre <b>`.content.xml`</b> per page/jcr:content
4. rimuovi manualmente la linea con <b>jcr:lockIsDeep</b>
5. aggiorna il pacchetto con il nuovo/fisso .content.xml
6. ricarica e installa il pacchetto modificato


Puoi quindi controllare nuovamente le proprietà della pagina e testare correttamente la replica/distribuzione.
