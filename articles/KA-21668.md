---
title: "Coda di distribuzione bloccata con AccessDeniedException"
description: Descrizione
solution: Experience Manager as a Cloud Service
product: Experience Manager as a Cloud Service
applies-to: "Experience Manager as a Cloud Service"
keywords: “KCS”
resolution: Resolution
internal-notes: "See https://jira.corp.adobe.com/browse/SKYOPS-53409"
bug: false
article-created-by: Yannick Poireault
article-created-date: "3/8/2023 4:26:24 PM"
article-published-by: Yannick Poireault
article-published-date: "3/8/2023 5:43:50 PM"
version-number: 1
article-number: KA-21668
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=d131a6ee-cdbd-ed11-83ff-6045bd0065b6"
source-git-commit: d7e68a8acce1e247ba7de44706ef7f6788985417
workflow-type: tm+mt
source-wordcount: '528'
ht-degree: 2%

---

# Coda di distribuzione bloccata con AccessDeniedException

## Descrizione {#description}

Quando tenti di replicare del contenuto di una pagina utilizzando le opzioni &quot;Pubblicazione rapida&quot;, &quot;Gestisci pubblicazione&quot; o &quot;Replica&quot;, la coda di distribuzione nell’istanza di authoring riceve <b>Bloccato</b>.<br><br>Nota: questo potrebbe valere anche per Frammento esperienza o altre risorse.<br><br> <br><br>È possibile controllare la coda di distribuzione dall’interfaccia utente di distribuzione:<br><br>Pubblicazione distribuzione strumenti AEM<br><br> <br><br>![](assets/___32190a90-d7bd-ed11-83ff-6045bd0065b6___.png)<br><br> <br><br>Selezionando la coda di Golden Publisher (voce in grassetto dall’elenco), si forniscono maggiori dettagli e in particolare le informazioni <b>PERCORSO</b> (qui possono essere presenti più elementi):<br><br> <br><br>![](assets/___602d0796-d7bd-ed11-83ff-6045bd0065b6___.png)<br><br> <br><br>Inoltre, esaminando il <b>Registri</b> La scheda fornisce il seguente errore corrispondente:<br><br> <br><br>2023/03/08 12:11:26:238 - INFO - Richiesta accettata con pacchetto di distribuzione PackageMessage(pubSlingId=a1133c97-6809-411e-a435-4eea0ecbe889, reqType=ADD, pkgId=dstrpck-1678277486031-63159f4b-c577-4079-8741-d41660597d20, pkgType=journal_filevault, pkgLength=6330, pubAgentName=publish, userId=replication-service, paths=/content/wknd/fr, deepPaths=) at offset=158705
<br>2023/03/08 12:11:27:459 - WARN - Messaggio: tentativo non riuscito (0/infinito) di importare il pacchetto di distribuzione PackageMessage(pubSlingId=a1133c97-6809-411e-a435-4eea0ecbe889, reqType=ADD, pkgId=dstrpck-1678277486031-63159f4b-c577-4079-8741-d4166059720, kgType=journal_filevault, pkgLength=6330, pubAgentName=publish, userId=replication-service, paths=/content/wknd/fr, deepPaths=) at offset=158705 a causa di &quot;javax.jcr.AccessDeniedException: OakAccess000: accesso negato&quot;. L’importazione tenterà di nuovo in un secondo momento,
<br>Stacktrace: org.apache.sling.distribution.common.DistributionException: javax.jcr.AccessDeniedException: OakAccess0000: accesso negato
<br>..<br><br><br> <br><br>Per sbloccare la coda, è necessario cancellare la coda (o rimuovere l&#39;elemento).<br>

## Risoluzione {#resolution}


Nonostante l’errore sia <b>javax.jcr.AccessDeniedException</b>, è possibile che non vi sia alcuna relazione con l’ACL/autorizzazioni per gli utenti del servizio di distribuzione, anche se questo dovrebbe essere preso in considerazione se il seguente scenario non si applica al caso.



<u><b>Diagnostica</b></u>

L’errore di cui sopra può verificarsi in alcune situazioni, quando il contenuto replicato ha una configurazione specifica correlata allo speciale <b>jcr:lockIsDeep</b> proprietà.

Per confermare la diagnosi, dovrà ispezionare <b>ciascuno dei percorsi menzionati</b> con uno dei seguenti strumenti a cui puoi accedere/è applicabile:

1. CRX/DE per istanze DEV
2. il [Browser dell’archivio](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/implementing/developer-tools/repository-browser.html?lang=it)
3. creazione di un pacchetto di contenuti in Gestione pacchetti (anche questa opzione fa parte della risoluzione)


A questo punto è necessario controllare <b>jcr:content</b> per ogni percorso trovato nell’interfaccia utente della coda di distribuzione e verifica che

- <b>fa </b>hanno un <b>jcr:lockIsDeep=&quot;(Boolean)true&quot;</b> proprietà
- <b>non </b>hanno un <b>jcr:lockOwner=&quot;xxx&quot;</b> proprietà
- <b>(non</b> hanno un <b>mix:bloccabile</b> valore in <b>jcr:mixinTypes</b>)


![](assets/e5fb7aa2-d8bd-ed11-83ff-6045bd0065b6.png)

In questo caso, il problema viene confermato, in quanto <b>jcr:lockIsDeep</b> La proprietà non deve essere presente da sola. Questa proprietà deve sempre essere impostata insieme a <b>jcr:lockOwner</b> quando <b>Blocco</b> una pagina.



<u><b>Risoluzione</b></u>

Per correggere il contenuto, l’unica soluzione è installare nell’Autore un pacchetto con le proprietà corrette impostate sul nodo corrispondente.

Puoi creare il pacchetto da un’altra istanza con il contenuto corrispondente oppure, se disponi solo di questo contenuto nell’istanza interessata, puoi seguire queste istruzioni:

1. genera un pacchetto sull’istanza interrotta per la pagina errata
2. scaricare il pacchetto
3. estrarre il <b>.content.xml</b> per page/jcr:content
4. rimuovi manualmente la riga con <b>jcr:lockIsDeep</b>
5. aggiorna il pacchetto con il nuovo/corretto .content.xml
6. ricarica e installa il pacchetto modificato


Puoi quindi controllare nuovamente le proprietà della pagina e verificare correttamente la replica/distribuzione.
